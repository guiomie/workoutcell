{"ts":1340578741398,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<html>\n<head>\n<title>WC</title>\n<link type=\"text/css\" href=\"css/custom-theme/jquery-ui-1.8.16.custom.css\" rel=\"stylesheet\" />\t\n<script type=\"text/javascript\" src=\"js/jquery-1.6.2.min.js\"></script>\n<script type=\"text/javascript\" src=\"js/jquery-ui-1.8.16.custom.min.js\"></script>\n<script type='text/javascript' src='./fullcalendar/fullcalendar.js'></script>\n<script type=\"text/javascript\" src=\"http://maps.googleapis.com/maps/api/js?sensor=false\"></script>\n<script type=\"text/javascript\" src=\"http://maps.google.com/maps/api/js?sensor=false&v=3&libraries=geometry\"></script>\n\n<link rel='stylesheet' type='text/css' href='./fullcalendar/fullcalendar.css' />\n\n<script>\n     $(document).ready(function(){\n\t\tpanelState = 'Create';\n\t\tp = 0;\n\t\tintervall = [];\n\t\t\n\t\t$('#fullcalendar').fullCalendar({\n\t\t\t// put your options and callbacks here\n\t\t\theight: 600,\n\t\t\ttheme: true\n\t\t});\n\t\t\n\t    $( \"#datepicker\" ).datepicker();\n\t\t$( \"#radio, #radio2, #radio3,#radio4\" ).buttonset();\n\t\t$( \"#accordion\" ).accordion();\n\t\t\n\t\tvar buttons = $('#push button, #check, #clearMap, #saveMap, #addIntervall, #removeIntervall').button();\n\t\t\n\t\t// Dialog\t\t\t\n\t\t$('#dialog').dialog({\n\t\t\tautoOpen: false,\n\t\t\twidth: 600,\n\t\t\tbuttons: {\n\t\t\t\t\"Ok\": function() { \n\t\t\t\t\t$(this).dialog(\"close\"); \n\t\t\t\t}, \n\t\t\t\t\"Cancel\": function() { \n\t\t\t\t\t$(this).dialog(\"close\"); \n\t\t\t\t} \n\t\t\t}\n\t\t});\n\t\t\t\t\n\t\t// Dialog Link\n\t\t$('#dialog_link').click(function(){\n\t\t\t$('#dialog').dialog('open');\n\t\t\treturn false;\n\t\t});\n\t\t\n\t\t\n\t\t$( \"#sliderIntensity\" ).slider({\n\t\t\torientation: \"vertical\",\n\t\t\trange: \"min\",\n\t\t\tmin: 0,\n\t\t\tmax: 100,\n\t\t\tvalue: 60,\n\t\t\tslide: function( event, ui ) {\n\t\t\t\tdocument.getElementById('intensityHtml').innerHTML = ui.value;\n\t\t\t}\n\t\t});\n\t\t\n\t\t// Event for when press delete icon\n\t\t$('#deleteTrace').click(function(){\n\t\t\tclearMap();\n\t\t});\n\t\t\n\t\t// Event for when press delete icon\n\t\t$('#bikeTrace').click(function(){\n\t\t\tif(bikeLayer.getMap() === null){\n\t\t\t\tbikeLayer.setMap(map);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tbikeLayer.setMap(null);\n\t\t\t}\n\t\t});\n\t\t\n\t\t$('#saveTrace').click(function(){\n\t\t\t\n\t\t\t//generate json format\n\t\t\t\n\t\t\t\n\t\t\t//send to server\n\t\t\t\n\t\t\t//when successfully sent, delete map data\n\t\t\t\n\t\t});\n\t\t\n\t\t $('#addIntervall').click(function(){\n\t\t\n\t\t\tvar target = $(\"input[type=text][id=unitInput]\").val();\n\t\t\tvar option = $('input[type=radio][name=radio2]:checked').attr('id');\n\t\t\tif(target !== \"\"){\n\t\t\t\tif (option === 'radioMeters'){\n\t\t\t\t\tif($(\"#intensityHtml\").text() === '0'){\n\t\t\t\t\t\t$(\"select[name='intervallList']\").append(new Option(target + \"m\", 'a'));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar output = target + \"m @ \" + $(\"#intensityHtml\").text() + \"%\";\n\t\t\t\t\t\t$(\"select[name='intervallList']\").append(new Option(output, 'a'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(option === 'radioSeconds'){\n\t\t\t\n\t\t\t\t\tif($(\"#intensityHtml\").text() === '0'){\n\t\t\t\t\t\t$(\"select[name='intervallList']\").append(new Option(target + \"s\", 'a'));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar output = target + \"s @ \" + $(\"#intensityHtml\").text() + \"%\";\n\t\t\t\t\t\t$(\"select[name='intervallList']\").append(new Option(output, 'a'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\t$('#removeIntervall').click(function(){\n\t\t\n\t\t//implement delete in array\n\t\t//implement get index value to delete proper value in array\n\t\t\t$(\"select[name='intervallList'] :selected\").remove();\n\t\t\t\n\t\t});\n\t\t\n\t\t//You can only enter numerical number in the field with this event\n\t\t$(\"input[type=text][id=unitInput]\").keydown(function(event) {\n\t\t\t// Allow only backspace and delete\n\t\t\tif ( event.keyCode == 46 || event.keyCode == 8 ) {\n\t\t\t\t// let it happen, don't do anything\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Ensure that it is a number and stop the keypress\n\t\t\t\tif (event.keyCode < 48 || event.keyCode > 57 ) {\n\t\t\t\t\tevent.preventDefault(); \n\t\t\t\t}   \n\t\t\t}\n\t\t});\n\t\t\n\t\t//hover states on the static widgets\n\t\t$('#dialog_link, ul#icons li').hover(\n\t\t\tfunction() { $(this).addClass('ui-state-hover'); }, \n\t\t\tfunction() { $(this).removeClass('ui-state-hover'); }\n\t\t);\n\t\t\n\t\t//Modification of UI based on user selection\n\t\t//rather complex, watch out for any modifications\n\t\t$(\"#radio4\").click(function(event) { \n\t\t\tvar target = $(event.target);\n\t\t\tif (target.text() == 'View'){\n\t\t\t\t//this if statement blocks reloading of widget if already selected\n\t\t\t\tif(panelState !== 'View'){\n\t\t\t\t\t\n\t\t\t\t\t// Change calendar size\n\t\t\t\t\t$(\"#fullcalendar\").animate({ \n\t\t\t\t\t\theight: \"500px\", \n\t\t\t\t\t\twidth: \"500px\", \n\t\t\t\t\t}, 1000, function(){\n\t\t\t\t\t\t//resize calendar, seems to be a glitch\n\t\t\t\t\t\t$('#fullcalendar').fullCalendar('render');\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\t//Transit between user panel functionality \n\t\t\t\t\t$(\"#\" + panelState).hide(\"slide\", {}, 1000, function(){\n\t\t\t\t\n\t\t\t\t\t\t$(\"#View\").show(\"slide\", {}, 1000);\n\t\t\t\t\t\tpanelState = 'View';\n\t\t\t\t\t});\t\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(target.text() == 'Create'){\n\t\t\t\t//Block re-rendering of widget if already choosen\n\t\t\t\tif(panelState !== 'Create'){\t\t\t\t\t\n\t\t\t\t\t// Change calendar size\n\t\t\t\t\t$(\"#fullcalendar\").animate({ \n\t\t\t\t\t\theight: \"600px\", \n\t\t\t\t\t\twidth: \"800px\", \n\t\t\t\t\t}, 1000, function(){\n\t\t\t\t\t\t//resize calendar, seems to be a glitch\n\t\t\t\t\t\t$('#fullcalendar').fullCalendar('render');\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\t//Transit between user panel functionality\n\t\t\t\t\t$(\"#\" + panelState).hide(\"slide\", {}, 1000, function(){\n\t\t\t\t\n\t\t\t\t\t\t$(\"#Create\").show(\"slide\", {}, 1000);\n\t\t\t\t\t\tpanelState = 'Create';\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(target.text() == 'Map'){\n\t\t\t\t//Block re-rendering of widget if already choosen\n\t\t\t\tif(panelState !== 'Map'){\t\t\t\t\t\n\t\t\t\t\t// Change calendar size\n\t\t\t\t\t$(\"#fullcalendar\").animate({ \n\t\t\t\t\t\theight: \"500px\", \n\t\t\t\t\t\twidth: \"500px\", \n\t\t\t\t\t}, 1000, function(){\n\t\t\t\t\t\t//resize calendar, seems to be a glitch\n\t\t\t\t\t\t$('#fullcalendar').fullCalendar('render');\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\t//Transit between user panel functionality\n\t\t\t\t\t$(\"#\" + panelState).hide(\"slide\", {}, 1000, function(){\n\t\t\t\t\t\t$(\"#Map\").show(\"slide\", {}, 1000, function(){\n\t\t\t\t\t\t\t//initializes map after MAP div is properly centered, sinon bug\n\t\t\t\t\t\t\tif(map === undefined){\n\t\t\t\t\t\t\t\tinitialize();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tpanelState = 'Map';\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\n\t\t\t\n\t\t\t}\n\t\t\t/*\n\t\t\t*/\n\t\t}); \n\t\t\n     });\n\t \t\n</script>\n\n<!-- Following code is for google mapped base parcour planner -->\n<script type=\"text/javascript\">\nvar map;\nvar poly;\nvar distance = 0;\nvar markerArray = [];\nvar bikeLayer = null;\n\nfunction initialize() {\n\t\n\tbikeLayer = new google.maps.BicyclingLayer();\n\tvar latlng = new google.maps.LatLng(45.50, -75.64);\n\tvar myOptions = {\n\t\tzoom: 14,\n\t\tcenter: latlng,\n\t\tmapTypeId: google.maps.MapTypeId.ROADMAP\n\t};\n\t\n\tmap = new google.maps.Map(document.getElementById(\"map_canvas\"),myOptions);\n\t\n\t//Polyline option setters\n\tvar polyOptions = {\n\t\tstrokeColor: '#000000',\n\t\tstrokeOpacity: 1.0,\n\t\tstrokeWeight: 3\n\t}\t\n\tpoly = new google.maps.Polyline(polyOptions);\n\tpoly.setMap(map);\n\t\n\t// Add a listener for the click event\n\tgoogle.maps.event.addListener(map, 'click', addLatLng);\n}\n\nfunction addLatLng(event) {\n\n\tvar path = poly.getPath();\n\n\t// Because path is an MVCArray, we can simply append a new coordinate\n\t// and it will automatically appear\n\tpath.push(event.latLng);\n\n\tupdateDistance(poly);\n  \n  // Add a new marker at the new plotted point on the polyline.\n  var marker = new google.maps.Marker({\n    position: event.latLng,\n    title: Math.round(distance) + ' meters',\n    map: map\n  });\n  \n  markerArray.push(marker);\n}\n\nfunction updateDistance(poly){\n\tpolypath = poly.getPath();\n\t\n\tif(polypath.getLength() !== 1){\n\t\tvar latLngB = polypath.getAt(polypath.getLength() - 1);\n\t\tvar latLngA = polypath.getAt(polypath.getLength() - 2);\n\t\tdistance = distance + \n\t\tgoogle.maps.geometry.spherical.computeDistanceBetween (latLngA, latLngB);\n\t\tdocument.getElementById('distance').innerHTML = Math.round(distance*100)/100000 + ' km';\n\t\t\n\t}\n\t\n}\n\nfunction clearMap(){\n\t// remove poly from map\n\tpoly.setMap(null);\n\t//delete poly\n\tpoly = null;\n\t\n\t// recreate poly\n\tvar polyOptions = {\n\t\tstrokeColor: '#000000',\n\t\tstrokeOpacity: 1.0,\n\t\tstrokeWeight: 3\n\t}\t\n\tpoly = new google.maps.Polyline(polyOptions);\n\tpoly.setMap(map);\n\tdistance = 0;\n\tdocument.getElementById('distance').innerHTML = Math.round(distance) + ' meters';\t\t\n\t\n\t//clear markers on map\n\tif (markerArray) {\n\t\tfor (i in markerArray) {\n\t\t\tmarkerArray[i].setMap(null);\n\t\t}\n\t}\n\t\n}\n\n</script>\n\n\n<style type=\"text/css\">\n\t\t\t/*demo page css*/\n\t\t\tbody{ font: 62.5% \"Trebuchet MS\", sans-serif; margin: 50px;}\n\t\t\t.demoHeaders { margin-top: 2em; }\n\t\t\t#dialog_link {padding: .4em 1em .4em 20px;text-decoration: none;position: relative;}\n\t\t\t#dialog_link span.ui-icon {margin: 0 5px 0 0;position: absolute;left: .2em;top: 50%;margin-top: -8px;}\n\t\t\tul#icons {margin: 0; padding: 0;}\n\t\t\tul#icons li {margin: 2px; position: relative; padding: 4px 0; cursor: pointer; float: left;  list-style: none;}\n\t\t\tul#icons span.ui-icon {float: left; margin: 0 4px;}\n\t\t\t#left { float: left; }\n\t\t\t#right, #middle { float: right;}\n\t\t\t#intervall { display: table-row;}\n</style>\n\n</head>\n\n<body>\n<div id='header' style=\"float:top; width:1000px;\"> \n\n\t<div id='logo' style=\"float:left\">    \n\t\tWC Logo\n\t</div>\n\n\t<div id='pub' style=\"float:center\"> \n\t\t/ Pub Space\n\t</div>\n\n\t<div id=\"toolBoxNav\" style=\"float:right\"> \n\t\t<div id=\"radio4\" style=\"margin-bottom: 2em;\"> \n\t\t\t<input type=\"radio\" id=\"radio41\" name=\"radio\" checked=\"checked\" /><label for=\"radio41\">View</label> \n\t\t\t<input type=\"radio\" id=\"radio42\" name=\"radio\" /><label for=\"radio42\">Map</label> \n\t\t\t<input type=\"radio\" id=\"radio43\" name=\"radio\" /><label for=\"radio43\">Create</label> \n\t\t</div>\n\t</div>\n\n</div>\n\n<!-- Full Calendar load -->\n<div id='fullcalendar'  style=\"width:800px; float:left;\"></div>\n\n<!-- toolpane, contains 3 item that show up 1 at the time \n No indent or wouldnt be readable-->\n<div id='leftPane' style=\"width:210px; float:left; margin-left: 16px;\"> \n\n<!-- Load the training viewer -->\n<div id=\"View\" style=\"display: none; background: green; width:510px; height:500px; margin-top:30px;\">\n\nView Results, comments and stats.\n\n</div>\n\n<div id=\"Map\" style=\"display: none; width:510px; height:500px; margin-top:30px;\">\n\n\t<div id=\"map_control\">\n\t\t<ul id=\"icons\" class=\"ui-widget ui-helper-clearfix\">\n\t\tClick on map to trace.\n\t\t<input type=\"text\" id=\"name\">\n\t\t<li class=\"ui-state-default ui-corner-all\" title=\"Clear Map\" id=\"deleteTrace\"><span class=\"ui-icon ui-icon-trash\"></span></li>\n\t\t<li class=\"ui-state-default ui-corner-all\" title=\"Save Trace\" id=\"saveTrace\"><span class=\"ui-icon ui-icon-disk\"></span></li>\n\t\t<li class=\"ui-state-default ui-corner-all\" title=\"Bike mode\" id=\"bikeTrace\"><span class=\"ui-icon ui-icon-transferthick-e-w\"></span></li>\n\t\t<span id=\"distance\">0 km</span>\n\t\t</ul>\n\t</div>\n\t\n\t<div id=\"map_canvas\" style=\"width:500px; height:400px\"></div>\n\n</div>\n\n<!-- Load the training planner -->\n<div id=\"Create\" >\n\n\t<div id='calendar'></div>\n\n\t<p>Date: <input type=\"text\" id=\"datepicker\"></p>\n\t\n\t<p><a href=\"#\" id=\"dialog_link\" class=\"ui-state-default ui-corner-all\"><span class=\"ui-icon ui-icon-newwin\"></span>Add Partner</a></p>\n\n\t<div id=\"dialog\" title=\"Social Interaction\">\n\t\tPartner search option\n\t</div>\n\n\t<select title=\"Select Course\">\n\t\t<option value=\"volvo\">5km pres de la maison</option>\n\t\t<option value=\"saab\">18.5k Aylmer</option>\n\t</select>\n\t\n\t<p> \n\t<div id=\"radio1\">\n\t\t<input type=\"radio\" id=\"radio11\" name=\"radio1\" /><label for=\"radio1\">Bike</label>\n\t\t<input type=\"radio\" id=\"radio12\" name=\"radio1\" checked=\"checked\" /><label for=\"radio2\">Swim</label>\n\t\t<input type=\"radio\" id=\"radio13\" name=\"radio1\" /><label for=\"radio3\">Run</label>\n\t</div> \n\t</p>\n\n\t<div id=\"accordion\">\n\t<h3><a href=\"#\">Intervall</a></h3>\n\t<div id=\"intervall\">\n\t\t<ul id=\"icons\" class=\"ui-widget ui-helper-clearfix\">\n\t\t<div id=\"left\" style=\"margin-top: 10px\">\n\t\t\t\n\t\t\t<div style=\"float: right;\">\n\t\t\t\tSelect target\n\t\t\t\t<div id=\"radio2\" style=\"margin-top: 5px; margin-bottom: 5px;\">\n\t\t\t\t\t<input type=\"radio\" id=\"radioMeters\" name=\"radio2\"  /><label for=\"radioMeters\">m</label>\n\t\t\t\t\t<input type=\"radio\" id=\"radioSeconds\" name=\"radio2\" checked=\"checked\" /><label for=\"radioSeconds\">s</label>\n\t\t\t\t</div>\n\t\t\t\tTarget value <br>\n\t\t\t\t<input type=\"text\" id=\"unitInput\" size=\"4\" style=\"margin-top: 5px; margin-bottom: 5px;\"></input><br>\n\t\t\t\tIntensity<br>\n\t\t\t\t<div>\n\t\t\t\t\t<span id=\"intensityHtml\" style=\"margin-top: 5px\">70</span>%\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div id=\"sliderIntensity\" style=\"height:100px; float:left; margin-right: 10px; margin-top: 20px;\"></div>\n\t\t\t\n\t\t</div>\n\t\t\n\t\t<div id=\"right\" style=\"margin-top: 10px\">\n\t\t<div>\n\t\t\t<li class=\"ui-state-default ui-corner-all\" title=\".ui-icon-circle-plusthick\" id=\"addIntervall\"><span class=\"ui-icon ui-icon-plusthick\"></span></li>\n\t\t\t<li class=\"ui-state-default ui-corner-all\" title=\".ui-icon-circle-minusthick\" id=\"removeIntervall\"><span class=\"ui-icon ui-icon-minusthick\"></span></li>\n\t\t</div>\t\n\t\t\t<select size=\"7\" style=\"width:110px;\" name=\"intervallList\">\n\t\t\t\n\t\t\t</select>\n\t\t</div>\n\t\t</ul>\n\t</div>\n\t\n\t<h3><a href=\"#\">Distance</a></h3>\n\t<div>\n\t\t<p>\n\t\tSelect Target type: <br>\n\t\t<div id=\"radio3\">\n\t\t\t<input type=\"radio\" id=\"radioKiloMeters\" name=\"radio3\"  /><label for=\"radioKiloMeters\">Kilometers</label>\n\t\t\t<input type=\"radio\" id=\"radioTime\" name=\"radio3\" checked=\"checked\" /><label for=\"radioTime\">Time</label> (hh:ss)\n\t\t</div>\n\t\t<input type=\"text\" id=\"distanceInput\" size=\"4\">\n\t\t</p>\n\t</div>\n\t</div> <!--end of accordion -->\n\n\t<div id=\"push\"> \n\t\t<button>Add Workout</button> \n\t</div>\n\t\n</div> <!-- end of tool box -->\n\n</div> <!-- end of toolPane -->\n\n</body>\n\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":13331}]],"length":13331}
